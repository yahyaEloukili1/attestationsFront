<!-- foumelouad.component.html -->
<div class="dashboard-container">

  <div class="row justify-content-center g-3">

    <!-- üîπ INDICATEURS GAUCHE -->
    <div class="col-12 col-lg-3 d-flex flex-column gap-4">

      <!-- D√©mographiques -->
      <div class="indicator-card">
        <h5 class="text-center mb-4 indicator-title">Indicateurs d√©mographiques</h5>

        <div class="row g-3">
          <div class="col-12 col-md-6 col-lg-12 col-xl-6">
            <div class="kpi">
              <i class="bi bi-people-fill text-primary"></i>
              <div class="kpi-content">
                <div class="kpi-label">Population</div>
                <div class="kpi-value">1 844</div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6 col-lg-12 col-xl-6">
            <div class="kpi">
              <i class="bi bi-house-door-fill text-success"></i>
              <div class="kpi-content">
                <div class="kpi-label">M√©nages</div>
                <div class="kpi-value">513</div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6 col-lg-12 col-xl-6">
            <div class="kpi">
              <i class="bi bi-gender-male text-info"></i>
              <div class="kpi-content">
                <div class="kpi-label">Hommes</div>
                <div class="kpi-value">45,4%</div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6 col-lg-12 col-xl-6">
            <div class="kpi">
              <i class="bi bi-gender-female text-danger"></i>
              <div class="kpi-content">
                <div class="kpi-label">Femmes</div>
                <div class="kpi-value">54,6%</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Territoriaux -->
      <div class="indicator-card">
        <h5 class="text-center mb-4 indicator-title">Indicateurs territoriaux</h5>

        <div class="row g-3">
          <div class="col-12 col-md-6 col-lg-12 col-xl-6">
            <div class="kpi">
              <i class="bi bi-aspect-ratio-fill text-secondary"></i>
              <div class="kpi-content">
                <div class="kpi-label">Superficie</div>
                <div class="kpi-value">2 503 km¬≤</div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6 col-lg-12 col-xl-6">
            <div class="kpi">
              <i class="bi bi-people-fill text-warning"></i>
              <div class="kpi-content">
                <div class="kpi-label">Densit√©</div>
                <div class="kpi-value">0,74 Hab./Km¬≤</div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- üîπ MAP CENTRE -->
    <div class="col-12 col-lg-6">
      <div class="map-card">
        <div class="map-title">Commune de Foum El Oued</div>
        <div #mapContainer class="map-only"></div>
      </div>
    </div>

    <!-- üîπ INDICATEURS DROITE -->
    <div class="col-12 col-lg-3 d-flex flex-column gap-4">
      <div class="indicator-card back-card">
        <button type="button" class="btn btn-lg back-btn w-100" (click)="goToProvince()">
          <i class="bi bi-arrow-left-circle me-2"></i>
          Retour √† la province
        </button>
      </div>

      <div class="indicator-card">
        <h5 class="text-center mb-4 indicator-title">Indicateurs socio-√©conomiques</h5>

        <div class="row g-3">
          <div class="col-12 col-md-6 col-lg-12 col-xl-6">
            <div class="kpi">
              <i class="bi bi-activity text-primary"></i>
              <div class="kpi-content">
                <div class="kpi-label">Taux d‚Äôactivit√©</div>
                <div class="kpi-value">47,9%</div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6 col-lg-12 col-xl-6">
            <div class="kpi">
              <i class="bi bi-people text-danger"></i>
              <div class="kpi-content">
                <div class="kpi-label">Pauvret√© multidimensionnelle</div>
                <div class="kpi-value">2,2%</div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6 col-lg-12 col-xl-6">
            <div class="kpi">
              <i class="bi bi-briefcase-fill text-dark"></i>
              <div class="kpi-content">
                <div class="kpi-label">Taux de ch√¥mage</div>
                <div class="kpi-value">30,1%</div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6 col-lg-12 col-xl-6">
            <div class="kpi">
              <i class="bi bi-shield-exclamation text-warning"></i>
              <div class="kpi-content">
                <div class="kpi-label">Vuln√©rabilit√©</div>
                <div class="kpi-value">3,5%</div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6 col-lg-12 col-xl-6">
            <div class="kpi">
              <i class="bi bi-people-fill text-info"></i>
              <div class="kpi-content">
                <div class="kpi-label">Pr√©scolarisation</div>
                <div class="kpi-value">94,67%</div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6 col-lg-12 col-xl-6">
            <div class="kpi">
              <i class="bi bi-mortarboard-fill text-success"></i>
              <div class="kpi-content">
                <div class="kpi-label">Scolarisation (6+)</div>
                <div class="kpi-value">94,3%</div>
              </div>
            </div>
          </div>

          <div class="col-12 col-md-6 col-lg-12 col-xl-6">
            <div class="kpi">
              <i class="bi bi-book-fill text-secondary"></i>
              <div class="kpi-content">
                <div class="kpi-label">Analphab√©tisme (10+)</div>
                <div class="kpi-value">11,9%</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center mt-3">
        <button
          type="button"
          class="btn btn-lg education-btn text-center"
          style="width: 400px;"
        >
          <i class="bi bi-bar-chart-fill me-1"></i>
          Voir indicateurs √©ducatifs
        </button>
      </div>
    </div>

  </div>

  <!-- ‚úÖ MENUS BAR (comme province) -->
  <div class="menus-bar">

    <!-- MISE -->
    <div class="menu-wrap" (click)="$event.stopPropagation()">
      <button class="btn btn-lg mise-btn"
              [class.is-active]="activeMiseProject !== null"
              (click)="toggleMenu('mise', $event)">
        <i class="bi" [ngClass]="getMenuLeftIcon('mise')"></i>
        <span>Mise √† niveau</span>
        <i class="bi" [ngClass]="openMenu==='mise' ? 'bi-chevron-up' : 'bi-chevron-down'"></i>
      </button>

      <div class="menu-pop" *ngIf="openMenu==='mise'" (click)="$event.stopPropagation()">
        <button class="menu-item" [class.active]="activeMiseProject==='M1'" (click)="selectMise('M1', $event)">Mise 1</button>
        <button class="menu-item" [class.active]="activeMiseProject==='M2'" (click)="selectMise('M2', $event)">Mise 2</button>
        <button class="menu-item" [class.active]="activeMiseProject==='M3'" (click)="selectMise('M3', $event)">Mise 3</button>
        <button class="menu-hide" (click)="hideMenu('mise', $event)">Masquer</button>
      </div>
    </div>

    <!-- EDUCATION -->
    <div class="menu-wrap" (click)="$event.stopPropagation()">
      <button class="btn btn-lg education-btn"
              [class.is-active]="activeEducationProject !== null"
              (click)="toggleMenu('education', $event)">
        <i class="bi" [ngClass]="getMenuLeftIcon('education')"></i>
        <span>Education</span>
        <i class="bi" [ngClass]="openMenu==='education' ? 'bi-chevron-up' : 'bi-chevron-down'"></i>
      </button>

      <div class="menu-pop" *ngIf="openMenu==='education'" (click)="$event.stopPropagation()">
        <button class="menu-item" [class.active]="activeEducationProject==='E1'" (click)="selectEducation('E1', $event)">Education 1</button>
        <button class="menu-item" [class.active]="activeEducationProject==='E2'" (click)="selectEducation('E2', $event)">Education 2</button>
        <button class="menu-item" [class.active]="activeEducationProject==='E3'" (click)="selectEducation('E3', $event)">Education 3</button>
        <button class="menu-item" [class.active]="activeEducationProject==='E4'" (click)="selectEducation('E4', $event)">Education 4</button>
        <button class="menu-hide" (click)="hideMenu('education', $event)">Masquer</button>
      </div>
    </div>

    <!-- SANT√â -->
    <div class="menu-wrap" (click)="$event.stopPropagation()">
      <button class="btn btn-lg health-btn"
              [class.is-active]="activeSanteProject !== null"
              (click)="toggleMenu('sante', $event)">
        <i class="bi" [ngClass]="getMenuLeftIcon('sante')"></i>
        <span>Sant√©</span>
        <i class="bi" [ngClass]="openMenu==='sante' ? 'bi-chevron-up' : 'bi-chevron-down'"></i>
      </button>

      <div class="menu-pop" *ngIf="openMenu==='sante'" (click)="$event.stopPropagation()">
        <button class="menu-item" [class.active]="activeSanteProject==='NOUVEAUX'" (click)="selectSante('NOUVEAUX', $event)">Nouveaux centres de sant√©</button>
        <button class="menu-item" [class.active]="activeSanteProject==='HOPITAUX_EXISTANTS'" (click)="selectSante('HOPITAUX_EXISTANTS', $event)">H√¥pitaux existants</button>
        <button class="menu-item" [class.active]="activeSanteProject==='ESSP_EXISTANTS'" (click)="selectSante('ESSP_EXISTANTS', $event)">ESSP existants</button>
        <button class="menu-item" [class.active]="activeSanteProject==='DOUIRAT'" (click)="selectSante('DOUIRAT', $event)">Zone Douirat</button>
        <button class="menu-hide" (click)="hideMenu('sante', $event)">Masquer</button>
      </div>
    </div>

    <!-- EAU -->
    <div class="menu-wrap" (click)="$event.stopPropagation()">
      <button class="btn btn-lg water-btn"
              [class.is-active]="activeEauProject !== null"
              (click)="toggleMenu('eau', $event)">
        <i class="bi" [ngClass]="getMenuLeftIcon('eau')"></i>
        <span>Eau potable</span>
        <i class="bi" [ngClass]="openMenu==='eau' ? 'bi-chevron-up' : 'bi-chevron-down'"></i>
      </button>

      <div class="menu-pop" *ngIf="openMenu==='eau'" (click)="$event.stopPropagation()">
        <button class="menu-item" [class.active]="activeEauProject==='P1'" (click)="selectEau('P1', $event)">R√©habilitation du r√©seau AEP</button>
        <button class="menu-item" [class.active]="activeEauProject==='P2'" (click)="selectEau('P2', $event)">AEP ‚Äì Zone Industrielle El Marsa</button>
        <button class="menu-item" [class.active]="activeEauProject==='P3'" (click)="selectEau('P3', $event)">STEP ‚Äì Zone Industrielle El Marsa</button>
        <button class="menu-item" [class.active]="activeEauProject==='P4'" (click)="selectEau('P4', $event)">Assainissement ‚Äì Laayoune</button>
        <button class="menu-item" [class.active]="activeEauProject==='P5'" (click)="selectEau('P5', $event)">Renforcement du stockage d‚Äôeau</button>
        <button class="menu-item" [class.active]="activeEauProject==='P6'" (click)="selectEau('P6', $event)">Assainissement ‚Äì Foum El Oued</button>
        <button class="menu-hide" (click)="hideMenu('eau', $event)">Masquer</button>
      </div>
    </div>

    <!-- EMPLOI -->
    <div class="menu-wrap" (click)="$event.stopPropagation()">
      <button class="btn btn-lg emploi-btn"
              [class.is-active]="activeEmploiProject !== null"
              (click)="toggleMenu('emploi', $event)">
        <i class="bi" [ngClass]="getMenuLeftIcon('emploi')"></i>
        <span>Emploi</span>
        <i class="bi" [ngClass]="openMenu==='emploi' ? 'bi-chevron-up' : 'bi-chevron-down'"></i>
      </button>

      <div class="menu-pop" *ngIf="openMenu==='emploi'" (click)="$event.stopPropagation()">
        <button class="menu-item" [class.active]="activeEmploiProject==='POINTS'" (click)="selectEmploi('POINTS', $event)">Unit√©s de valorisation (points)</button>
        <button class="menu-item" [class.active]="activeEmploiProject==='ZONE1'" (click)="selectEmploi('ZONE1', $event)">Extension zone d‚Äôactivit√© (52Ha)</button>
        <button class="menu-item" [class.active]="activeEmploiProject==='HIZAM'" (click)="selectEmploi('HIZAM', $event)">Zone d‚Äôactivit√© Al Hizam (70Ha)</button>
        <button class="menu-item" [class.active]="activeEmploiProject==='ATELIERS'" (click)="selectEmploi('ATELIERS', $event)">Ateliers artisanaux</button>
        <button class="menu-item" [class.active]="activeEmploiProject==='SITES'" (click)="selectEmploi('SITES', $event)">Sites touristiques</button>
        <button class="menu-hide" (click)="hideMenu('emploi', $event)">Masquer</button>
      </div>
    </div>

  </div>
</div>
